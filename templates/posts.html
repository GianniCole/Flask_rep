{%extends 'base.html' %}

{% block head%}
<title>Posts </title>
{% endblock%}




{% block body%}
<div>
    <h1>Tutti i nostri posts</h1>
    <a class="bt btn-success float-right" href="/posts/new"> Nuovo Post </a>
</div>
{% for post in posts %}
<hr align=”left” size=”2″ width=”300″ color=green noshade>
<h2>{{ post.title}}</h2>
{% if post.author%}
<small>Scritto da {{ post.author}} il {{post.date_posted.strftime("%x")}}</small>
{% else%}
<small>Non è conosciuto il nome dell'autore, ma è stato scritto il {{post.date_posted.strftime("%x")}}</small>
{%endif%}
<p>{{ post.content }}</p>
<a class="btn btn-danger" href='/posts/delete/{{post.id}}'>Cancella</a>
<a class="btn btn-primary" href='/posts/edit/{{post.id}}'>Modifica</a>
<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
    Launch demo modal
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-edit-post">Modifica post</h2>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <!--

          -->
                <form action='/posts/edit/{{post.id}}' method='POST'>
                    Title: <input class="form-control" type='text' name='title' id='title' value="{{post.title}}">
                    <br>
                    Author: <input type='text' name='author' id='author' value="{{ post.author}}">
                    <br>
                    <!--      Post: <input type='text' name='content' id='content' value="{{post.content}}"> -->
                    <div class="form-group">
                        <label for="content">Post:</label>
                        <textarea class="form-control" rows="4" name="content" id="content">{{post.content}}</textarea>
                        <!--il tag textarea non ha un campo value, ma il contenuto deve essere inserito tra i tag  <textarea> -->
                    </div>
                    <input class="btn btn-success" type='submit' value='Salva'>
                </form>
                    <!--
                    
  -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

</hr>
{% endfor %}
{% endblock%}